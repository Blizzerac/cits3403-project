{% extends "base.html" %}
{% block title %}Quester's Cache || Home{% endblock %}
{% block content %}

<div class="container-fluid mt-5">
  <div class="container">
    <!-- Floating Sidebar Controls -->
    <div class="control-panel row background-overlay">
      <div class="col-md-6 d-flex flex-column justify-content-center align-items-center">
        <h4>Post created on: {{ date }}</h4>
        {% if post.claimed%}
        <h4>Post claimed by: {{ post.claimer.username }}</h4>
        {% else %}
        <h4>Post claimed by: No-one<h4>
        {% endif %}
      </div>
      <div class="col-md-6 d-flex flex-column justify-content-center align-items-center">
        <!-- Assortment of buttons according to user type -->
        {% if not post.completed %}
        {% if not post.claimed and current_user.userID != post.posterID %}
        <button class="btn btn-primary mb-2">Claim ReQuest</button>
        {% elif post.claimed and current_user.userID == post.claimerID %}
          {% if not post.waitingApproval %}
          <button class="btn btn-primary mb-2">Finalise ReQuest</button>
          {% endif %}
          <button class="btn btn-primary mb-2">Relinquish Claim</button>
        {% elif current_user.userID == post.posterID %}
          {% if post.waitingApproval %}
          <button class="btn btn-primary mb-2">Approve Submission</button>
          <button class="btn btn-danger mb-2">Deny Submission</button>
          {% endif %}
        <button class="btn btn-danger mb-2">Cancel ReQuest</button>
        {% endif %}
        {% endif %}
      </div>
    </div>

    <!-- Main Content -->
    <div class="mt-3 row">
      <div class="container background-overlay">
        <div class="container rounded post-item" id="post-header">
          <div class="d-flex justify-content-between">
            <h3 class="text-wrap">{{ post.title }}</h3>
            <span class="align-self-center badge bg-secondary p-3">{{ post.reward }} Gold</span>
          </div>
          <p class="text-wrap">{{ post.description }}</p>
        </div>
        
        <!-- Additional content and featurettes here -->
      </div>

      {% for response in post.responses %}
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}